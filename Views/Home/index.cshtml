@{
    ViewData["Title"] = "Inicio";
}

<div class="container mt-3">

    <!-- üîπ ACCI√ìN PRINCIPAL -->
    <div class="d-grid mb-4">
        <a asp-controller="Ventas"
           asp-action="Create"
           class="btn btn-primary btn-lg">
            ‚ûï Registrar venta
        </a>
    </div>

    <!-- üîπ RESUMEN DEL D√çA -->
    <div class="row g-3 mb-4">

        <div class="col-6 col-md-3">
            <div class="card text-center shadow-sm">
                <div class="card-body">
                    <small class="text-muted">Ganancia hoy</small>
                    <h4 class="text-success">
                        $@ViewBag.GananciaHoy
                    </h4>
                </div>
            </div>
        </div>

        <div class="col-6 col-md-3">
            <div class="card text-center shadow-sm">
                <div class="card-body">
                    <small class="text-muted">Meta diaria</small>
                    <h4>
                        $@ViewBag.MetaDiaria
                    </h4>
                </div>
            </div>
        </div>

        <div class="col-6 col-md-3">
            <div class="card text-center shadow-sm">
                <div class="card-body">
                    <small class="text-muted">Falta</small>
                    <h4 class="text-warning">
                        $@ViewBag.FaltaParaMeta
                    </h4>
                </div>
            </div>
        </div>

        <div class="col-6 col-md-3">
            <div class="card shadow-sm">
                <div class="card-body">
                    <small class="text-muted d-block text-center">
                        Progreso
                    </small>

                    <div class="progress mt-2" style="height: 20px;">
                        <div class="progress-bar bg-success"
                             style="width: @ViewBag.Progreso%">
                            @ViewBag.Progreso%
                        </div>
                    </div>
                </div>
            </div>
        </div>

    </div>

    <!-- üîπ VENTAS DE HOY -->
    <div class="card shadow-sm mb-4">
        <div class="card-header">
            <strong>Ventas de hoy</strong>
        </div>

        <div class="card-body p-0">
            @if (ViewBag.VentasHoy == null || ViewBag.VentasHoy.Count == 0)
            {
                <div class="p-3 text-muted text-center">
                    No hay ventas registradas hoy
                </div>
            }
            else
            {
                <div class="table-responsive">
                    <table class="table table-sm mb-0">
                        <thead class="table-light">
                            <tr>
                                <th >Art√≠culo</th>
                                <th>Ganancia</th>
                                <th>Ubicaci√≥n</th>
                            </tr>
                        </thead>
                        <tbody>
                            @foreach (var venta in ViewBag.VentasHoy)
                            {
                                <tr>
                                    <td>@venta.Articulo</td>
                                    <td class="text-success">
                                        $@(venta.PrecioVenta - venta.Inversion)
                                    </td>
                                    <td>@venta.Ubicacion</td>
                                </tr>
                            }
                        </tbody>
                    </table>
                </div>
            }
        </div>
    </div>

            <h4 class="mt-5">Ventas Pendientes</h4>

<button class="btn btn-warning mb-3" data-bs-toggle="modal" data-bs-target="#modalPendiente">
    Nueva Venta Pendiente
</button>

<table class="table table-bordered">
    <thead>
        <tr>
            <th>Art√≠culo</th>
            <th>Cliente</th>
            <th>Ubicaci√≥n</th>
            <th></th>
        </tr>
    </thead>
    <tbody>
        @foreach (var p in ViewBag.Pendientes)
        {
            <tr>
                <td>@p.Articulo</td>
                <td>@p.Cliente</td>
                <td>@p.Ubicacion</td>
                <td>
                         <form asp-controller="VentasPendientes"
                        asp-action="Delete"
                        method="post"
                        style="display:inline;">
                        <input type="hidden" name="id" value="@p.Id" />
                        <button class="btn btn-sm btn-danger">Eliminar</button>
                        </form>
                </td>
            </tr>
        }
    </tbody>
</table>









    <!-- üîπ ACCESO AL HISTORIAL -->
    <div class="text-center">
        <a asp-controller="Ventas"
           asp-action="Index"
           class="btn btn-outline-secondary">
            Ver historial completo
        </a>
    </div>

</div>
